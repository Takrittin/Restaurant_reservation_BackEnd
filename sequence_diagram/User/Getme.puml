@startuml Get Me (GET)

header User Authentication Sequence Diagram
footer Page %page% of %lastpage%
title "Get Me (GET)"

participant "Client" as client
participant "<<JavaScript>>\n:server" as server
participant "<<router>>\n:auth" as routerAuth
participant "<<middleware>>\n:authMiddleware" as authMiddleware
participant "<<controllers>>\n:auth" as controllersAuth
participant "<<model>>\n:User" as modelUser
database "<<MongoDB>>\n:users" as UsersDatabase

client->server ++: req.get('/api/auth/me', { Authorization: "Bearer token" })
server->routerAuth ++: app.use('/api/auth', auth)
routerAuth -> authMiddleware ++: verifyToken(req.headers.Authorization)
authMiddleware -> controllersAuth ++: getMe(req.user.id)
controllersAuth -> modelUser ++: findById(req.user.id)
modelUser -> UsersDatabase ++: Query User by ID
UsersDatabase --> modelUser --: userData
modelUser --> controllersAuth --: userData
controllersAuth -> client --: response (userData or error)

@enduml